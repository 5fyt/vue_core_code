{"version":3,"file":"vue.js","sources":["../src/observe.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["class Observer {\r\n  constructor(data) {\r\n    this.walk(data)\r\n  }\r\n  walk(data) {\r\n    //重新定义属性\r\n    Object.keys(data).forEach((key) => defineReactive(data, key, data[key]))\r\n  }\r\n}\r\nfunction defineReactive(target, key, value) {\r\n  //递归，如果value里面还有对象时，需要继续遍历在做劫持\r\n  observe(value)\r\n  //将data里的属性都做劫持，对象属性值更新，原来的值也要更新\r\n  Object.defineProperty(target, key, {\r\n    get() {\r\n      return value\r\n    },\r\n    set(newValue) {\r\n      if (newValue == value) {\r\n        return\r\n      }\r\n      value = newValue\r\n    },\r\n  })\r\n}\r\nexport function observe(data) {\r\n  //只能对对象和已存在的对象进行观测\r\n  if (typeof data !== 'object' || data == null) {\r\n    return\r\n  }\r\n\r\n  return new Observer(data) //更方便写出多种情况的观测数据\r\n}\r\n","import { observe } from './observe'\r\nexport function initState(vm) {\r\n  const opts = vm.$options\r\n  //opts 选项里面可能还有props,watch,data .... 等选项\r\n  if (opts.data) {\r\n    initData(vm)\r\n  }\r\n}\r\n//将vm实例上的_data属性再次代理，可以达到直接用vm来访问data里面的属性的效果\r\nfunction proxy(vm, target, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get() {\r\n      return vm[target][key] //vm._data.name\r\n    },\r\n    set(newValue) {\r\n      vm[target][key] = newValue\r\n    },\r\n  })\r\n}\r\n//对options里的data数据进行初始化\r\nfunction initData(vm) {\r\n  let data = vm.$options.data\r\n  //data 的数据可能是data：{} 也可能是函数data(){return {}}\r\n  data = typeof data === 'function' ? data.call(vm) : data\r\n  console.log(data)\r\n  vm._data = data //将这个data数据也放在实例上，要不你就的用vm.$options.data.xxx这种方式去访问属性，\r\n  //观测数据，对这个数据进行响应式封装\r\n  observe(data)\r\n  //要将vm.name => vm._data.name 代理成这样\r\n  for (let key in data) {\r\n    proxy(vm, '_data', key)\r\n  }\r\n}\r\n","import { initState } from \"./state\"\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    const vm = this //保存实例，this指向的是实例\r\n    vm.$options = options //获取Vue构造函数中的选项参数\r\n    //初始化状态\r\n    initState(vm)\r\n  }\r\n}\r\n","import { initMixin } from './init'\r\n/**\r\n * 创建Vue构造函数，在构造函数上创建一个初始化函数，\r\n * 将每个函数都单独封装成一个文件，互相不会影响\r\n */\r\nfunction Vue(options) {\r\n  this._init(options)\r\n}\r\ninitMixin(Vue)\r\nexport default Vue\r\n"],"names":["Observer","data","_classCallCheck","walk","_createClass","key","value","Object","keys","forEach","defineReactive","target","observe","defineProperty","get","set","newValue","_typeof","initState","vm","opts","$options","initData","proxy","call","console","log","_data","initMixin","Vue","prototype","_init","options"],"mappings":"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"}